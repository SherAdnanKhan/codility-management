@component('mail::message')
    # Daily Report<br>
    Report Date : {{Carbon\Carbon::yesterday()->toDateString()}}


@component('mail::table')
        | Employee Name              | CheckIn                                                                                                    |  CheckOut                                                                                              |Time                                                                                                                                                                                                                                                                                                                                        |        Break                                                                                  |     Total                                                                                               |Hours Logged                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |   Late                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
        |----------------------------|----------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        @foreach($report_attendance as $attendance)
            @if($attendance->getOriginal('time_spent') != null)
        | <p style="text-align: left">{{$attendance->user->name}}</p> |{{ $attendance->time_spent != 'No Time Spent'?date('g:i A',strtotime($attendance->check_in_time)):' '}}|{{$attendance->time_spent != 'No Time Spent'?date('g:i A',strtotime($attendance->check_out_time)):' '}} |@php  if($attendance->check_in_time && $attendance->check_out_time){ $checkin=\Carbon\Carbon::parse($attendance->check_in_time);$checkout=\Carbon\Carbon::parse($attendance->check_out_time); $minutes = $checkin->diffInRealMinutes($checkout); $time=\App\Attendance::mktimecustom(date('H:i', mktime(0,$minutes))); echo $time;}@endphp  |{{$attendance->break_interval?\App\Attendance::mktimecustom($attendance->break_interval):' '}} |{{$attendance->time_spent != 'No Time Spent'?\App\Attendance::mktimecustom($attendance->time_spent):' '}}|@php$get_task=$attendance->task_report; $day=\Carbon\Carbon::today();@endphp  @foreach ($get_task as $get_time)  @php if ($get_time->time_take){$explode_time = explode(':', $get_time->time_take); $total = ($explode_time[0]*60) + ($explode_time[1]); $combined_time=$day->addRealMinutes($total);}  @endphp @endforeach @php  if(isset($combined_time)){ echo (\App\Attendance::mktimecustom($combined_time->toTimeString())); unset($combined_time); }else{ echo (' ');}@endphp      |  {{\App\Helper\Helper::check_informed_late($attendance->getOriginal('attendance_type')) == true ?'':$attendance->attendance_type}}@if($attendance->inform(\Carbon\Carbon::parse($attendance->check_in_time)->startOfDay()->timestamp,\Carbon\Carbon::parse($attendance->check_in_time)->endOfDay()->timestamp)) @if($attendance->late_informed) {{$attendance->late_informed.'('}}@endif{{$attendance->getOriginal('attendance_type') != 'check_in'?$attendance->inform(\Carbon\Carbon::parse($attendance->check_in_time)->startOfDay()->timestamp,\Carbon\Carbon::parse($attendance->check_in_time)->endOfDay()->timestamp)->inform_type == "LATE"?$attendance->attendance_type:'':''}} @if($attendance->late_informed) {{')'}}@endif @endif @if($attendance->leave_comment){{$attendance->inform(\Carbon\Carbon::parse($attendance->check_in_time)->startOfDay()->timestamp,\Carbon\Carbon::parse($attendance->check_in_time)->endOfDay()->timestamp)?$attendance->inform(\Carbon\Carbon::parse($attendance->check_in_time)->startOfDay()->timestamp,\Carbon\Carbon::parse($attendance->check_in_time)->endOfDay()->timestamp)->inform_type == "LEAVE"? ($attendance->inform(\Carbon\Carbon::parse($attendance->check_in_time)->startOfDay()->timestamp,\Carbon\Carbon::parse($attendance->check_in_time)->endOfDay()->timestamp)->request_id != null && $attendance->leave_comment != null?$attendance->inform(\Carbon\Carbon::parse($attendance->check_in_time)->startOfDay()->timestamp,\Carbon\Carbon::parse($attendance->check_in_time)->endOfDay()->timestamp)->get_request_leave->approved:'').$attendance->inform(\Carbon\Carbon::parse($attendance->check_in_time)->startOfDay()->timestamp,\Carbon\Carbon::parse($attendance->check_in_time)->endOfDay()->timestamp)->leaves->name  :' ':' '}}@elseif($attendance->leave_comment == null && $attendance->leave_id != null){{$attendance->leave->name}} @endif|
            @endif
            @if($attendance->getOriginal('time_spent') != null)
             @php
             $leave_checker =true;
             @endphp
            @endif
        @endforeach
@endcomponent

@if($leave_checker == true)

@component('mail::table')

        | Employee Name             | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |              Status                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
        |---------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        @foreach($report_attendance as $attendance)
            @if($attendance->getOriginal('time_spent') == null)
                | <p style="text-align: left">{{$attendance->user->name}}</p>|{{\App\Helper\Helper::check_on_time($attendance->attendance_type) == true ?'':$attendance->attendance_type}}@if($attendance->leave_comment){{$attendance->inform(\Carbon\Carbon::parse($attendance->check_in_time)->startOfDay()->timestamp,\Carbon\Carbon::parse($attendance->check_in_time)->endOfDay()->timestamp)?$attendance->inform(\Carbon\Carbon::parse($attendance->check_in_time)->startOfDay()->timestamp,\Carbon\Carbon::parse($attendance->check_in_time)->endOfDay()->timestamp)->inform_type == "LEAVE"? $attendance->inform(\Carbon\Carbon::parse($attendance->check_in_time)->startOfDay()->timestamp,\Carbon\Carbon::parse($attendance->check_in_time)->endOfDay()->timestamp)->request_id != null && $attendance->leave_comment != null?$attendance->inform(\Carbon\Carbon::parse($attendance->check_in_time)->startOfDay()->timestamp,\Carbon\Carbon::parse($attendance->check_in_time)->endOfDay()->timestamp)->get_request_leave->approved:'':'':''}}@endif <p style="color: darkgoldenrod">{{$attendance->late_informed?$attendance->late_informed:''}}</p>|@if($attendance->leave_comment){{$attendance->inform(\Carbon\Carbon::parse($attendance->check_in_time)->startOfDay()->timestamp,\Carbon\Carbon::parse($attendance->check_in_time)->endOfDay()->timestamp)?$attendance->inform(\Carbon\Carbon::parse($attendance->check_in_time)->startOfDay()->timestamp,\Carbon\Carbon::parse($attendance->check_in_time)->endOfDay()->timestamp)->inform_type == "LEAVE"?$attendance->inform(\Carbon\Carbon::parse($attendance->check_in_time)->startOfDay()->timestamp,\Carbon\Carbon::parse($attendance->check_in_time)->endOfDay()->timestamp)->leaves->name  :' ':' '}}@elseif($attendance->leave_comment == null && $attendance->leave_id != null){{$attendance->leave->name}} @else {{''}}@endif |
            @endif
        @endforeach
@endcomponent

@endif

    Thanks,

    {{ config('app.name') }}
@endcomponent
